import{Q as He,u as Fe,b as Re,a as me}from"./QBtn-Dn4_BT9M.js";import{u as Ae,b as Qe,c as Me,d as Ve,e as $e,f as Ie,a as Ne,Q as Oe}from"./axios-DeiWpJaL.js";import{c as u,t as R,r as v,g as ce,V as re,W as We,a as Be,k as d,T as se,l as A,w as ue,X as oe,b as pe,Y as ve,q as L,Z as je,$ as Ke,a0 as k,s as Ue,a1 as Xe,a2 as Ye,a3 as Ge,a4 as Je,_ as Ze,a5 as et,P as tt,B as D,C as N,D as le,H as ge,E as b,G as _,R as he,I as ot,J as lt,M as it}from"./index-DJ_WzErL.js";import{b as nt,u as at,a as rt,Q as st}from"./QList-DXTxxY6f.js";import{r as ye,a as be,b as ut,c as ct}from"./focusout-DELA8suR.js";import{u as dt}from"./albums-Otgv_46O.js";const ft={ratio:[String,Number]};function mt(e,t){return u(()=>{const i=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(i)!==!0&&i>0?{paddingBottom:`${100/i}%`}:null})}const vt=1.7778,gt=R({name:"QImg",props:{...ft,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:vt},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:i}){const o=v(e.initialRatio),r=mt(e,o),s=ce(),{registerTimeout:a,removeTimeout:m}=re(),{registerTimeout:g,removeTimeout:f}=re(),w=u(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),P=u(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),h=[v(null),v(w.value)],y=v(0),q=v(!1),C=v(!1),Q=u(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),j=u(()=>({width:e.width,height:e.height})),M=u(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),K=u(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function V(){if(f(),e.loadingShowDelay===0){q.value=!0;return}g(()=>{q.value=!0},e.loadingShowDelay)}function x(){f(),q.value=!1}function U({target:l}){oe(s)===!1&&(m(),o.value=l.naturalHeight===0?.5:l.naturalWidth/l.naturalHeight,$(l,1))}function $(l,S){S===1e3||oe(s)===!0||(l.complete===!0?B(l):a(()=>{$(l,S+1)},50))}function B(l){oe(s)!==!0&&(y.value=y.value^1,h[y.value].value=null,x(),l.getAttribute("__qerror")!=="true"&&(C.value=!1),i("load",l.currentSrc||l.src))}function X(l){m(),x(),C.value=!0,h[y.value].value=P.value,h[y.value^1].value=w.value,i("error",l)}function I(l){const S=h[l].value,p={key:"img_"+l,class:M.value,style:K.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...S};return y.value===l?Object.assign(p,{class:p.class+"current",onLoad:U,onError:X}):p.class+="loaded",d("div",{class:"q-img__container absolute-full",key:"img"+l},d("img",p))}function Y(){return q.value===!1?d("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},A(t[C.value===!0?"error":"default"])):d("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[d(He,{color:e.spinnerColor,size:e.spinnerSize})])}{let l=function(){ue(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,S=>{m(),C.value=!1,S===null?(x(),h[y.value^1].value=w.value):V(),h[y.value].value=S},{immediate:!0})};We.value===!0?Be(l):l()}return()=>{const l=[];return r.value!==null&&l.push(d("div",{key:"filler",style:r.value})),h[0].value!==null&&l.push(I(0)),h[1].value!==null&&l.push(I(1)),l.push(d(se,{name:"q-transition--fade"},Y)),d("div",{key:"main",class:Q.value,style:j.value,role:"img","aria-label":e.alt},l)}}}),we=R({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const i=u(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>d(e.tag,{class:i.value},A(t.default))}}),Se=R({name:"QCard",props:{...nt,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:i}}=ce(),o=at(e,i),r=u(()=>"q-card"+(o.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>d(e.tag,{class:r.value},A(t.default))}}),ht=R({name:"QCardActions",props:{...Fe,vertical:Boolean},setup(e,{slots:t}){const i=Re(e),o=u(()=>`q-card__actions ${i.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>d("div",{class:o.value},A(t.default))}});function yt(e,t,i){let o;function r(){o!==void 0&&(ve.remove(o),o=void 0)}return pe(()=>{e.value===!0&&r()}),{removeFromHistory:r,addToHistory(){o={condition:()=>i.value===!0,handler:t},ve.add(o)}}}let H=0,ie,ne,F,ae=!1,_e,qe,ke,T=null;function bt(e){wt(e)&&Ue(e)}function wt(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Xe(e),i=e.shiftKey&&!e.deltaX,o=!i&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),r=i||o?e.deltaY:e.deltaX;for(let s=0;s<t.length;s++){const a=t[s];if(Ye(a,o))return o?r<0&&a.scrollTop===0?!0:r>0&&a.scrollTop+a.clientHeight===a.scrollHeight:r<0&&a.scrollLeft===0?!0:r>0&&a.scrollLeft+a.clientWidth===a.scrollWidth}return!0}function Te(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function O(e){ae!==!0&&(ae=!0,requestAnimationFrame(()=>{ae=!1;const{height:t}=e.target,{clientHeight:i,scrollTop:o}=document.scrollingElement;(F===void 0||t!==window.innerHeight)&&(F=i-t,document.scrollingElement.scrollTop=o),o>F&&(document.scrollingElement.scrollTop-=Math.ceil((o-F)/8))}))}function Ce(e){const t=document.body,i=window.visualViewport!==void 0;if(e==="add"){const{overflowY:o,overflowX:r}=window.getComputedStyle(t);ie=je(window),ne=Ke(window),_e=t.style.left,qe=t.style.top,ke=window.location.href,t.style.left=`-${ie}px`,t.style.top=`-${ne}px`,r!=="hidden"&&(r==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),o!=="hidden"&&(o==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,L.is.ios===!0&&(i===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",O,k.passiveCapture),window.visualViewport.addEventListener("scroll",O,k.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Te,k.passiveCapture))}L.is.desktop===!0&&L.is.mac===!0&&window[`${e}EventListener`]("wheel",bt,k.notPassive),e==="remove"&&(L.is.ios===!0&&(i===!0?(window.visualViewport.removeEventListener("resize",O,k.passiveCapture),window.visualViewport.removeEventListener("scroll",O,k.passiveCapture)):window.removeEventListener("scroll",Te,k.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=_e,t.style.top=qe,window.location.href===ke&&window.scrollTo(ie,ne),F=void 0)}function St(e){let t="add";if(e===!0){if(H++,T!==null){clearTimeout(T),T=null;return}if(H>1)return}else{if(H===0||(H--,H>0))return;if(t="remove",L.is.ios===!0&&L.is.nativeMobile===!0){T!==null&&clearTimeout(T),T=setTimeout(()=>{Ce(t),T=null},100);return}}Ce(t)}function _t(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,St(t))}}}let W=0;const qt={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},xe={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},kt=R({name:"QDialog",inheritAttrs:!1,props:{...Ae,...Qe,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...Me,"shake","click","escapeKey"],setup(e,{slots:t,emit:i,attrs:o}){const r=ce(),s=v(null),a=v(!1),m=v(!1);let g=null,f=null,w,P;const h=u(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:y}=_t(),{registerTimeout:q}=re(),{registerTick:C,removeTick:Q}=Ge(),{transitionProps:j,transitionStyle:M}=Ve(e,()=>xe[e.position][0],()=>xe[e.position][1]),K=u(()=>M.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:V,hidePortal:x,portalIsAccessible:U,renderPortal:$}=$e(r,s,De,"dialog"),{hide:B}=Ie({showing:a,hideOnRouteChange:h,handleShow:Ee,handleHide:Le,processOnMount:!0}),{addToHistory:X,removeFromHistory:I}=yt(a,B,h),Y=u(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${qt[e.position]}`+(m.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),l=u(()=>a.value===!0&&e.seamless!==!0),S=u(()=>e.autoClose===!0?{onClick:Pe}:{}),p=u(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${l.value===!0?"modal":"seamless"}`,o.class]);ue(()=>e.maximized,n=>{a.value===!0&&Z(n)}),ue(l,n=>{y(n),n===!0?(ut(ee),ct(J)):(ye(ee),be(J))});function Ee(n){X(),f=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,Z(e.maximized),V(),m.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),C(z)):Q(),q(()=>{if(r.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:c,bottom:E}=document.activeElement.getBoundingClientRect(),{innerHeight:fe}=window,te=window.visualViewport!==void 0?window.visualViewport.height:fe;c>0&&E>te/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-te,E>=fe?1/0:Math.ceil(document.scrollingElement.scrollTop+E-te/2))),document.activeElement.scrollIntoView()}P=!0,s.value.click(),P=!1}V(!0),m.value=!1,i("show",n)},e.transitionDuration)}function Le(n){Q(),I(),de(!0),m.value=!0,x(),f!==null&&(((n&&n.type.indexOf("key")===0?f.closest('[tabindex]:not([tabindex^="-"])'):void 0)||f).focus(),f=null),q(()=>{x(!0),m.value=!1,i("hide",n)},e.transitionDuration)}function z(n){rt(()=>{let c=s.value;if(c!==null){if(n!==void 0){const E=c.querySelector(n);if(E!==null){E.focus({preventScroll:!0});return}}c.contains(document.activeElement)!==!0&&(c=c.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.querySelector("[autofocus], [data-autofocus]")||c,c.focus({preventScroll:!0}))}})}function G(n){n&&typeof n.focus=="function"?n.focus({preventScroll:!0}):z(),i("shake");const c=s.value;c!==null&&(c.classList.remove("q-animate--scale"),c.classList.add("q-animate--scale"),g!==null&&clearTimeout(g),g=setTimeout(()=>{g=null,s.value!==null&&(c.classList.remove("q-animate--scale"),z())},170))}function J(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&G():(i("escapeKey"),B()))}function de(n){g!==null&&(clearTimeout(g),g=null),(n===!0||a.value===!0)&&(Z(!1),e.seamless!==!0&&(y(!1),ye(ee),be(J))),n!==!0&&(f=null)}function Z(n){n===!0?w!==!0&&(W<1&&document.body.classList.add("q-body--dialog"),W++,w=!0):w===!0&&(W<2&&document.body.classList.remove("q-body--dialog"),W--,w=!1)}function Pe(n){P!==!0&&(B(n),i("click",n))}function ze(n){e.persistent!==!0&&e.noBackdropDismiss!==!0?B(n):e.noShake!==!0&&G()}function ee(n){e.allowFocusOutside!==!0&&U.value===!0&&Je(s.value,n.target)!==!0&&z('[tabindex]:not([tabindex="-1"])')}Object.assign(r.proxy,{focus:z,shake:G,__updateRefocusTarget(n){f=n||null}}),pe(de);function De(){return d("div",{role:"dialog","aria-modal":l.value===!0?"true":"false",...o,class:p.value},[d(se,{name:"q-transition--fade",appear:!0},()=>l.value===!0?d("div",{class:"q-dialog__backdrop fixed-full",style:K.value,"aria-hidden":"true",tabindex:-1,onClick:ze}):null),d(se,j.value,()=>a.value===!0?d("div",{ref:s,class:Y.value,style:M.value,tabindex:-1,...S.value},A(t.default)):null)])}return $}}),Tt={name:"AlbumDetail",setup(){const e=dt(),t=et(),i=tt(),o=u(()=>t.params.id),r=v(!0),s=v(!1),a=v("");Be(()=>{setTimeout(()=>{e.fetchPhotos(o.value),r.value=!1},1e3)});const m=f=>{a.value=f,s.value=!0},g=()=>{i.push("/album")};return{photos:u(()=>e.photos),loading:r,albumTitle:u(()=>{const f=e.albums.find(w=>w.id==o.value);return f?f.title:"Album"}),viewPhoto:m,goBack:g,photoDialog:s,currentPhotoUrl:a}}},Ct={class:"q-pa-none",style:{"max-width":"auto"}},xt={key:0,class:"spinner-container"},Bt={key:1,class:"q-gutter-md row items-start q-pa-md"},pt=["src"];function Et(e,t,i,o,r,s){return D(),N("div",null,[le("h4",null,ge(o.albumTitle),1),b(me,{label:"Back To Album",onClick:o.goBack,color:"dark",class:"q-mb-md"},null,8,["onClick"]),le("div",Ct,[b(st,{bordered:""},{default:_(()=>[o.loading?(D(),N("div",xt,[b(Ne,{color:"dark",size:"3em"}),b(Oe,{offset:[0,8]},{default:_(()=>[he("Loading...")]),_:1})])):(D(),N("div",Bt,[(D(!0),N(ot,null,lt(o.photos,a=>(D(),it(Se,{key:a.id,class:"my-card col-12 col-sm-6 col-md-4 col-lg-3",onClick:m=>o.viewPhoto(a.url)},{default:_(()=>[b(gt,{src:a.thumbnailUrl,class:"fixed-img"},null,8,["src"]),b(we,{class:"card-description"},{default:_(()=>[he(ge(a.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]))]),_:1})]),b(kt,{modelValue:o.photoDialog,"onUpdate:modelValue":t[1]||(t[1]=a=>o.photoDialog=a),persistent:""},{default:_(()=>[b(Se,null,{default:_(()=>[b(we,null,{default:_(()=>[le("img",{src:o.currentPhotoUrl,alt:"Photo",style:{width:"100%"}},null,8,pt)]),_:1}),b(ht,{align:"right"},{default:_(()=>[b(me,{flat:"",label:"Close",onClick:t[0]||(t[0]=a=>o.photoDialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Rt=Ze(Tt,[["render",Et],["__scopeId","data-v-64a40068"]]);export{Rt as default};
